
### 영속성 컨텍스트
- 영속성 컨텍스트: JPA가 엔티티의 생명주기를 관리하고 데이터 변경 사항을 추적하여 DB와 동기화하는 공간

### 엔티티의 생명 주기
- 비영속 상태 : 영속성 컨텍스트와 관계없는 관계
- 영속 상태 : 영속성 컨텍스트에 관리되는 상태  (영속 상태로 관리해라 : em.persist(), find() 해도 영속상태가됨)  -> 아직 DB에 저장된것은 아님
- 준영속 상태 : 영속성 컨텍스트에 관리되고있다가 분리된 상태
- 삭제: 삭제된 상태

### 영속성 컨텍스트의 이점
- 1차 캐시 : 영속성 컨텍스트 내 1차 캐시에서 객체가 관리되고 있음. 동일 엔티티 반복 조회 시 DB 접근 최소화-> 큰 이점은 없지만 이 매커니즘이 중요
- 동일성 보장
- 쓰기지연 : 동일한 트랜잭션내에서 insert, update 가 커밋 되기 전에 한번에 실행된다.
- 변경감지(더티체킹) : 영속성컨텍스트가 객체가 변경된 내용을 자동으로 감지하고 이를 db에 반영한다. (스냅샷과 비교)
- 지연로딩 : 매우 중요

### 플러시
- 플러시 : 영속성 컨텍스트의 변경내용을 DB에 반영하는 것
- 동일 트랜잭션이 커밋되기 전 쓰기지연 SQL저장소의 내용을 DB에 반영하는 것

### DB 반영 시점
- 엔티티 변경 사항이 DB에 반영되는 시점은 트랜잭션이 커밋되거나 명시적으로 플러시를 호출할 때 DB로 반영